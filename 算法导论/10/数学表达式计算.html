<script type="text/javascript">

// 太难了，不会啊
var f = "3+4*5-8/2+(3+1)*((2-1)*(3-1)*2)/3";


var a = f.split("");
console.log(a);

var op = [];
var exp = [];
for(var i = 0; i < a.length; i++){
	var s = a[i];
	if(isNaN(s)){
		// 符号
		if(op.length == 0){
			op.push(s);
		} else {
			var y0 = youxianji(s);
			var y1 = youxianji(op[op.length-1]);
			if(y0 < y1){
				exp.push(op.pop());
				while(op.length && y0 >= youxianji(op[op.length-1])){
					exp.push(op.pop());
				}
			}
			op.push(s);
		}
		
	} else {
		// 字符
		exp.push(s);
	}
	console.log('============');
	console.log(exp.join(''));
	console.log(op.join(''))
}
while(op.length){
	exp.push(op.pop());
}

console.log(exp, op);

function youxianji(s){
	if(s=='+'||s=='-'){
		return 1;
	}
	if(s=='*'||s=='/'){
		return 2;
	}
	if(s=='('){
		return 0;
	}
	if(s==')'){
		return 3;
	}
}


</script>